'use strict';var c=Object,f=window,g=document,h=Array,k='fpsElement',l='defineProperties',m='style',n='canvas',p='call',q='prototype',r='constructor',t='threeJsObject',u='position',v='rotation',w='getOwnPropertyDescriptor',x='width',z='apply',A='height',B='length',C='stage',aa='',ba=' ',ca='#00ccff',da='.',ea='0px',fa='2d',ga='Anim.json',ia='Anim.png',ja='GET',ka='Type Coercion failed',la='_xhr_readyChangeHandler',ma='absolute',na='canvas',oa='click',pa='div',qa='domElement_eventHandler',ra='fps',
sa='native code',ta='number',ua='render',va='string',wa='textureLoadedHandler',xa='updateFrameHandler',ya='var ';function D(a){return function(){return this[a]}}var E,za=this;function Aa(a,b,d){return a[p][z](a.bind,arguments)}function Ba(a,b,d){if(!a)throw Error();if(2<arguments[B]){var e=h[q].slice[p](arguments,2);return function(){var d=h[q].slice[p](arguments);h[q].unshift[z](d,e);return a[z](b,d)}}return function(){return a[z](b,arguments)}}
function F(a,b,d){F=Function[q].bind&&-1!=Function[q].bind.toString().indexOf(sa)?Aa:Ba;return F[z](null,arguments)}function G(a,b){var d=a.split(da),e=za;d[0]in e||!e.execScript||e.execScript(ya+d[0]);for(var y;d[B]&&(y=d.shift());)d[B]||void 0===b?e=e[y]?e[y]:e[y]={}:e[y]=b}function H(a,b){function d(){}d.prototype=b[q];a.m=b[q];a.prototype=new d;a[q].constructor=a;a.va=function(a,d,Ua){for(var ha=h(arguments[B]-2),R=2;R<arguments[B];R++)ha[R-2]=arguments[R];return b[q][d][z](a,ha)}};function I(){}I[q].L=550;I[q].K=400;c[l](I[q],{stageWidth:{get:D('L')},stageHeight:{get:D('K')}});I[q].a={names:[{name:'Stage',b:'com.plter.two.app.Stage'}]};function J(){this.U=new I}c[l](J[q],{stage:{get:D('U')},camera:{get:D('ba'),set:function(a){this.ba=a}}});J[q].a={names:[{name:'Context',b:'com.plter.two.app.Context'}]};var K=f.THREE,Ca=K.PerspectiveCamera;G('com.plter.two.supports.threejs.THREE.PerspectiveCamera',Ca);var Da=K.Scene;G('com.plter.two.supports.threejs.THREE.Scene',Da);var Ea=K.WebGLRenderer;G('com.plter.two.supports.threejs.THREE.WebGLRenderer',Ea);var Fa=K.PointLight;G('com.plter.two.supports.threejs.THREE.PointLight',Fa);G('com.plter.two.supports.threejs.THREE.BoxGeometry',K.BoxGeometry);G('com.plter.two.supports.threejs.THREE.MeshLambertMaterial',K.MeshLambertMaterial);var Ga=K.Mesh;
G('com.plter.two.supports.threejs.THREE.Mesh',Ga);var Ha=K.Object3D;G('com.plter.two.supports.threejs.THREE.Object3D',Ha);var Ia=K.DoubleSide;G('com.plter.two.supports.threejs.THREE.DoubleSide',Ia);G('com.plter.two.supports.threejs.THREE.TextureLoader',K.TextureLoader);var Ja=K.Texture;G('com.plter.two.supports.threejs.THREE.Texture',Ja);var L=K.PlaneGeometry;G('com.plter.two.supports.threejs.THREE.PlaneGeometry',L);var Ka=K.MeshBasicMaterial;
G('com.plter.two.supports.threejs.THREE.MeshBasicMaterial',Ka);G('com.plter.two.supports.threejs.THREE.Color',K.Color);var La=K.Vector2;G('com.plter.two.supports.threejs.THREE.Vector2',La);var M=K.Raycaster;G('com.plter.two.supports.threejs.THREE.Raycaster',M);function N(a,b){this.ca=a;this.X=b;this.X.node=this}N[q].ra=function(a,b){var d=this.context;O.x=a;O.y=b;Ma.setFromCamera(O,d.camera);return 0<Ma.intersectObject(this[t])[B]};N[q].hitTest=N[q].ra;var Ma=new M,O=new La;
c[l](N[q],{threeJsObject:{get:D('X')},context:{get:D('ca')},x:{get:function(){return this[u].x},set:function(a){this[u].x=a}},y:{get:function(){return this[u].y},set:function(a){this[u].y=a}},z:{get:function(){return this[u].z},set:function(a){this[u].z=a}},rotationX:{get:function(){return this[v].x},set:function(a){this[v].x=a}},rotationY:{get:function(){return this[v].y},set:function(a){this[v].y=a}},rotationZ:{get:function(){return this[v].z},set:function(a){this[v].z=a}},position:{get:function(){return this[t][u]}},
rotation:{get:function(){return this[t][v]}}});N[q].a={names:[{name:'Node',b:'com.plter.two.display.Node'}]};function P(a){this.u=[];N[p](this,a,new Ha)}H(P,N);P[q].Y=function(a){this[t].add(a[t])};P[q].addChild=P[q].Y;P[q].removeChild=function(a){this[t].remove(a[t])};P[q].removeChild=P[q].removeChild;c[l](P[q],{children:{get:function(){for(;this.u[B];)this.u.pop();for(var a=this[t].children,b=a[B],d=0;d<b;d++)this.u.push(a[d].node);return this.u}}});P[q].a={names:[{name:'Container',b:'com.plter.two.display.Container'}]};function Q(a){P[p](this,a)}H(Q,P);Q[q].update=function(){};Q[q].update=Q[q].update;Q[q].sa=function(){};Q[q].onUiEvent=Q[q].sa;Q[q].a={names:[{name:'Scene',b:'com.plter.two.display.Scene'}]};function S(a){this.c=2/a[C].stageHeight;this.i=T(g.createElement(na),HTMLCanvasElement);this.i.width=256;this.i.height=256;this.da=T(this.i.getContext(fa),CanvasRenderingContext2D);this.V=new Ja(this.i);var b=new Ka;b.side=Ia;b.map=this.texture;b=new Ga(new L(this.i[x]*this.c,this.i[A]*this.c),b);N[p](this,a,b);this.V=this.texture}H(S,N);S[q].N=function(a,b){this.O(a/this.c,b/this.c)};S[q].setSize=S[q].N;
S[q].O=function(a,b){this[n][x]==a&&this[n][A]==b||U(this,a,b);this[n].width=a;this[n].height=b};S[q].setSizeInPixel=S[q].O;S[q].aa=function(){this.texture.needsUpdate=!0};S[q].updateTexture=S[q].aa;function U(a,b,d){a[t].geometry=new L(b*a.c,d*a.c)}
c[l](S[q],{width:{get:function(){return this.widthInPixel*this.c},set:function(a){this.widthInPixel=a/this.c}},widthInPixel:{get:function(){return this[n][x]},set:function(a){this[n][x]!=a&&U(this,a,this.heightInPixel);this[n].width=a}},height:{get:function(){return this.heightInPixel*this.c},set:function(a){this.heightInPixel=a/this.c}},heightInPixel:{get:function(){return this[n][A]},set:function(a){this[n][A]!=a&&U(this,this.widthInPixel,a);this[n].height=a}},texture:{get:D('V')},canvas:{get:D('i')},
context2d:{get:D('da')}});S[q].a={names:[{name:'Display',b:'com.plter.two.display.Display'}]};function Na(a,b){this.ha=a;this.ea=b}c[l](Na[q],{name:{get:D('ha')},data:{get:D('ea')}});Na[q].a={names:[{name:'Event',b:'com.plter.two.events.Event'}]};function V(){this.j=[]}V[q].add=function(a){this.j.push(a)};V[q].add=V[q].add;V[q].remove=function(a){for(var b=0;b<this.j[B];b++)if(this.j[b]==a){this.j.splice(b,1);break}};V[q].remove=V[q].remove;V[q].s=function(a,b){a='undefined'!==typeof a?a:null;b='undefined'!==typeof b?b:null;for(var d=!0,e=0;e<this.j[B];e++)this.j[e](a,b)||(d=!1);return d};V[q].dispatch=V[q].s;V[q].a={names:[{name:'EventListenerList',b:'com.plter.two.events.EventListenerList'}]};function W(a){return Math.pow(2,Math.ceil(Math.log(a)*Math.LOG2E))}G('com.plter.two.tools.MathTool.resetNumberToNearPower2',W);function X(a,b,d,e){e='undefined'!==typeof e?e:100;this.ia=new V;this.ka=new V;this.ja=new V;S[p](this,a);this.la=b;this.W=d;this.fa=e;this.l=new XMLHttpRequest;this.l.onreadystatechange=Y(this.ma,this,la)}H(X,S);E=X[q];E.J=100;E.I=100;E.A=!1;E.g=0;E.T=!0;E.ma=function(){4==this.l.readyState&&(200==this.l.status?(this.S=JSON.parse(this.l.responseText))?(this.f=this.S.frames,Oa(this)):this.onJsonLoadError.s(null,this):this.onJsonLoadError.s(null,this))};
function Oa(a){a.v=new Image;a.v.onload=Y(a.ta,a,wa);a.v.onerror=function(){a.onTextureLoadError.s(null,this)};a.v.src=a.W}E.ta=function(){var a=this.f[0];this.J=a.sourceSize.w;this.I=a.sourceSize.h;this.O(W(this.J),W(this.I));Pa(this,0);this.onLoad.s(null,this)};function Pa(a,b){var d=a.f[b],e=d.frame;a.context2d.clearRect(0,0,a.widthInPixel,a.heightInPixel);a.context2d.drawImage(a.v,e.x,e.y,e.w-1,e.h-1,0,0,e.w,e.h);a.aa();d.script&&d.script(a)}
E.load=function(){this.l.open(ja,this.spriteSheetJsonUrl);this.l.send()};X[q].load=X[q].load;X[q].play=function(){this.A||(this.ga=setInterval(Y(this.ua,this,xa),this.frameDelay),this.A=!0)};X[q].play=X[q].play;X[q].stop=function(){this.A&&(clearInterval(this.ga),this.A=!1)};X[q].stop=X[q].stop;X[q].qa=function(a){this.stop();this.g=a;Pa(this,a)};X[q].gotoAndStop=X[q].qa;X[q].pa=function(a){this.g=a;this.play()};X[q].gotoAndPlay=X[q].pa;X[q].na=function(a,b){this.f[a].script=b};
X[q].addFrameScript=X[q].na;X[q].ua=function(){Pa(this,this.g);this.g++;this.g>this.f[B]-1&&(this.repeat?this.g=0:(this.g--,this.stop()))};c[l](X[q],{spriteSheetJsonUrl:{get:D('la')},frames:{get:D('f')},textureUrl:{get:D('W')},spriteSheetWidth:{get:D('J')},spriteSheetHeight:{get:D('I')},onJsonLoadError:{get:D('ia')},onLoad:{get:D('ja')},onTextureLoadError:{get:D('ka')},frameDelay:{get:D('fa')},currentFrameIndex:{get:D('g')},repeat:{get:D('T'),set:function(a){this.T=a}}});
X[q].a={names:[{name:'SpriteSheet',b:'com.plter.two.flash.SpriteSheet'}]};function Qa(a){P[p](this,a);var b=new X(a,ga,ia,50);b.load();b.onLoad.add(function(){b.play()});this.Y(b)}H(Qa,Q);Qa[q].a={names:[{name:'FlashSpriteSheetScene',b:'com.plter.flashspritesheet.FlashSpriteSheetScene'}]};function Ra(){return f.Date.now()}G('com.plter.two.supports.js.Date.now',Ra);function Z(a,b){this.U=new I;a='undefined'!==typeof a?a:550;b='undefined'!==typeof b?b:400;this[C].L=a;this[C].K=b;this.camera=new Ca(90,a/b,.01,100);this.camera[u].z=1;this.B=new Ea;this.B.setSize(a,b);this.C=new Da;new M;this.domElement.addEventListener(oa,Y(this.oa,this,qa),!1);var d=new Fa(16777215,1,100);d[u].z=1;this.C.add(d);this.$()}H(Z,J);E=Z[q];E.H=!1;E.P=0;E.G=0;E.F=0;E.f=0;E.D=0;E.N=function(a,b){this.B.setSize(a,b);this[C].L=a;this[C].K=b};Z[q].setSize=Z[q].N;
Z[q].Z=function(a){this.o&&this.C.remove(this.o[t]);this.o=a;this.C.add(this.o[t])};Z[q].presentScene=Z[q].Z;Z[q].$=function(){this.F=Ra();0<this.G&&(this.D=this.F-this.G);this.G=this.F;this.P=1E3/this.D;this.showFps&&0==this.f%60&&(this[k].innerHTML=this.P.toFixed()+ra);this.o&&this.o.update(this.D);this.B.render(this.C,this.camera);f.requestAnimationFrame(Y(this.$,this,ua));this.f++};Z[q].oa=function(){};
c[l](Z[q],{domElement:{get:function(){return this.B.domElement}},showFps:{get:D('H'),set:function(a){(this.H=a)?g.body.appendChild(this[k]):g.body.removeChild(this[k])}},frames:{get:D('f')},fpsElement:{get:function(){this.R||(this.R=T(g.createElement(pa),HTMLDivElement),this[k][m].position=ma,this[k][m].left=ea,this[k][m].top=ea,this[k][m].color=ca);return this.R}}});Z[q].a={names:[{name:'Two',b:'com.plter.two.app.Two'}]};function T(a,b,d){d=void 0!==d?d:!1;b=Sa(a,b);if(!b&&d)throw a=TypeError?new TypeError(ka):Error(ka),a;return b?a:null}G('org.apache.flex.utils.Language.as',T);G('org.apache.flex.utils.Language._int',function(a){return a>>0});
function Sa(a,b){var d,e;if(null==a||a&&null==b)return!1;d=function(a){var e;e=a.a.M;for(a=e[B]-1;-1<a;a--)if(e[a]===b||e[a][q].a.M&&d(new e[a]))return!0;return!1};if(b===String&&typeof a===va||a instanceof b)return!0;if(typeof a===va)return!1;if(typeof a===ta)return b===Number;if(b===h&&h.isArray(a))return!0;if(void 0===a.a)return!1;if(a.a.M&&d(a))return!0;if(e=a[r].m)for(;e&&e.a;){if(e.a.M&&d(e))return!0;e=e[r].m}return!1}G('org.apache.flex.utils.Language.is',Sa);
G('org.apache.flex.utils.Language.trace',function(a){var b,d=aa;for(b=0;b<arguments[B];b++)0<b&&(d+=ba),d+=arguments[b];b=za.console;void 0===b&&void 0!==f.console&&(b=f.console);try{b&&b.log&&b.log(d)}catch(e){}});G('org.apache.flex.utils.Language.uint',function(a){return a>>>0});G('org.apache.flex.utils.Language.preincrement',function(a,b){var d=a[b]+1;return a[b]=d});G('org.apache.flex.utils.Language.predecrement',function(a,b){var d=a[b]-1;return a[b]=d});
G('org.apache.flex.utils.Language.postincrement',function(a,b){var d=a[b];a[b]=d+1;return d});G('org.apache.flex.utils.Language.postdecrement',function(a,b){var d=a[b];a[b]=d+1;return d});G('org.apache.flex.utils.Language.superGetter',function(a,b,d){a=a.m;for(var e=c[w](a,d);null==e;)a=a[r].m,e=c[w](a,d);return e.get[p](b)});G('org.apache.flex.utils.Language.superSetter',function(a,b,d,e){a=a.m;for(var y=c[w](a,d);null==y;)a=a[r].m,y=c[w](a,d);y.set[z](b,[e])});
function Y(a,b,d){if(b.hasOwnProperty(d))return b[d];a=F(a,b);c.defineProperty(b,d,{value:a});return a}G('org.apache.flex.utils.Language.closure',Y);function Ta(){Z[p](this);g.body.appendChild(this.domElement);this.showFps=!0;this.Z(new Qa(this))}H(Ta,Z);Ta[q].a={names:[{name:'Main',b:'Main'}]};G('Main',Ta);
//# sourceMappingURL=./Main.js.map